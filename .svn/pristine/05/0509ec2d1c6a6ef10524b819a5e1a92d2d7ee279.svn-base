#!/usr/bin/python
#

import os, time, logging

from pywebio.input import *
from pywebio.output import *
from pywebio.pin import *
from pywebio_battery import popup_input
from pywebio.session import *

class Interface:
   def __init__(self,sincronizador):
      self.STOP = True
      self.Pause = False
      self.sincronizador = sincronizador
      self.create_widgets()

   def create_widgets(self):
      put_html('<h1>Sincronismo</h1>')
      put_input(label = "Intervalo de atualização", name = 'interval', type = NUMBER, value = 5)
      put_row([
         put_buttons(['Para','Reinicia'], onclick = self.start_stop)
      ],size='90% 10px 5%')
      put_text()
      put_text('Mensagens:')
      put_scrollable(put_scope('mensagens'), height=200, keep_bottom=True)


   def start_stop(self, operacao):
      if operacao == 'Para':
         put_text('Pedido de parar', scope='mensagens')
         self.sincronizador.stop()
         put_text('Parado', scope='mensagens')

      if operacao == 'Reinicia':
         put_text('Pedido de reiniciar', scope='mensagens')
         self.sincronizador.start()

   def put_log(self, texto):
      put_text(texto, scope='mensagens')


